version: '3.8'

services:
  streamingmt:
    image: registry.isl.iar.kit.edu/streamingmt
    build: ${COMPONENTS_DIR}/streamingmt
    depends_on:
      - qbmediator
    environment:
      - QUEUE_SYSTEM=${QUEUE_SYSTEM:-KAFKA}
    command: python -u StreamMT.py --queue-server kafka --queue-port 9092 --redis-server redis --partitions 25
    networks:
      - LTPipeline
    restart: on-failure

networks:
  LTPipeline: {}
